summary: Ensure that snapctl is-connected command works.

prepare: |
  snap pack test-snap
  snap install --dangerous test-snap_1_all.snap

restore: |
  snap remove test-snap

execute: |
  # network is connected by default
  test-snap.checkconn network

  snap disconnect test-snap:network

  # if not connected, we expect error status and a message
  if test-snap.checkconn network; then
    echo "expected network to be disconnected"
  fi
  test-snap.checkconn network 2>&1 | MATCH "network is not connected"

  if test-snap.checkconn home; then
    echo "home is not expected"
  fi
  test-snap.checkconn home 2>&1 | MATCH "home is not connected"
