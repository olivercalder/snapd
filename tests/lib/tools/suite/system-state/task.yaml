summary: smoke test for the system-state tool

execute: |

    # Check help
    "$TESTSTOOLS"/system-state | MATCH "usage: is-core"
    "$TESTSTOOLS"/system-state -h | MATCH "usage: is-core"
    "$TESTSTOOLS"/system-state --help | MATCH "usage: is-core"

    # check ubuntu core 16
    if [[ "$SPREAD_SYSTEM" == ubuntu-core-16-* ]]; then
        "$TESTSTOOLS"/system-state is-core
        "$TESTSTOOLS"/system-state is-core-16
        ! "$TESTSTOOLS"/system-state is-core-18
        ! "$TESTSTOOLS"/system-state is-classic

    # check ubuntu core 18
    elif [[ "$SPREAD_SYSTEM" == ubuntu-core-18-* ]]; then
        "$TESTSTOOLS"/system-state is-core
        "$TESTSTOOLS"/system-state is-core-18
        ! "$TESTSTOOLS"/system-state is-core-20
        ! "$TESTSTOOLS"/system-state is-classic

    # check ubuntu core 20
    elif [[ "$SPREAD_SYSTEM" == ubuntu-core-20-* ]]; then
        "$TESTSTOOLS"/system-state is-core
        "$TESTSTOOLS"/system-state is-core-20
        ! "$TESTSTOOLS"/system-state is-core-18
        ! "$TESTSTOOLS"/system-state is-classic

    # check ubuntu trusty
    elif [[ "$SPREAD_SYSTEM" == ubuntu-14-* ]]; then
        "$TESTSTOOLS"/system-state is-classic
        "$TESTSTOOLS"/system-state is-trusty
        ! "$TESTSTOOLS"/system-state is-bionic
        ! "$TESTSTOOLS"/system-state is-core

    # check ubuntu xenial
    elif [[ "$SPREAD_SYSTEM" == ubuntu-16-* ]]; then
        "$TESTSTOOLS"/system-state is-classic
        "$TESTSTOOLS"/system-state is-xenial
        ! "$TESTSTOOLS"/system-state is-bionic
        ! "$TESTSTOOLS"/system-state is-core

    # check ubuntu bionic
    elif [[ "$SPREAD_SYSTEM" == ubuntu-18-* ]]; then
        "$TESTSTOOLS"/system-state is-classic
        "$TESTSTOOLS"/system-state is-bionic
        ! "$TESTSTOOLS"/system-state is-focal
        ! "$TESTSTOOLS"/system-state is-core

    # check ubuntu focal
    elif [[ "$SPREAD_SYSTEM" == ubuntu-20.04-* ]]; then
        "$TESTSTOOLS"/system-state is-classic
        "$TESTSTOOLS"/system-state is-focal
        ! "$TESTSTOOLS"/system-state is-xenial
        ! "$TESTSTOOLS"/system-state is-core

    # check other distributions
    else
        "$TESTSTOOLS"/system-state is-classic
        ! "$TESTSTOOLS"/system-state is-focal
        ! "$TESTSTOOLS"/system-state is-core
    fi 
