summary: smoke test for the system-state tool

execute: |

    # Check help
    os.query | MATCH "usage: is-core"
    os.query -h | MATCH "usage: is-core"
    os.query --help | MATCH "usage: is-core"

    case "$SPREAD_SYSTEM" in
        ubuntu-core-16-*)
            os.query is-core
            os.query is-core-16
            os.query is-core-18 && exit 1
            os.query is-classic && exit 1
            ;;
        ubuntu-core-18-*)
            os.query is-core
            os.query is-core-18
            os.query is-core-20 && exit 1
            os.query is-classic && exit 1
            ;;
        ubuntu-core-20-*)
            os.query is-core
            os.query is-core-20
            os.query is-core-18 && exit 1
            os.query is-classic && exit 1
            ;;
        ubuntu-14-*)
            os.query is-classic
            os.query is-trusty
            os.query is-bionic && exit 1
            os.query is-core && exit 1
            ;;
        ubuntu-16-*)
            os.query is-classic
            os.query is-xenial
            os.query is-bionic && exit 1
            os.query is-core && exit 1        
            ;;
        ubuntu-18-*)
            os.query is-classic
            os.query is-bionic
            os.query is-focal && exit 1
            os.query is-core && exit 1    
            ;;
        ubuntu-20.04-*)
            os.query is-classic
            os.query is-focal
            os.query is-xenial && exit 1
            os.query is-core && exit 1    
            ;;
        *)
            os.query is-classic
            os.query is-focal && exit 1
            os.query is-core && exit 1
            ;;
    esac
