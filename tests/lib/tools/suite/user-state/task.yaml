summary: smoke test for the user-state tool

execute: |
    # Check help
    "$TESTSTOOLS"/user-state | MATCH "usage: remove-with-group <user>"
    "$TESTSTOOLS"/user-state -h | MATCH "usage: remove-with-group <user>"
    "$TESTSTOOLS"/user-state --help | MATCH "usage: remove-with-group <user>"

    # Check list users
    "$TESTSTOOLS"/user-state list-users | MATCH test

    # Check list groups
    "$TESTSTOOLS"/user-state list-groups | MATCH 12345

    # Check remove user and group
    if [ -f /var/lib/extrausers/passwd ]; then
        adduser mytest001 mytest001
    else
        adduser --extrausers mytest001 mytest001
    fi
    "$TESTSTOOLS"/user-state remove-with-group mytest001

    "$TESTSTOOLS"/user-state list-users | NOMATCH mytest001
    "$TESTSTOOLS"/user-state list-groups | NOMATCH mytest001
