summary: System settings work

prepare: |
    hostname > hostname.bak
    cp /etc/timezone timezone.bak

restore: |
    hostnamectl set-hostname "$(cat hostname.bak)" || true
    timedatectl set-timezone "$(cat timezone.bak)" || true

execute: |
    echo "Check that setting the hostname works"
    hostnamectl set-hostname coole-kiste
    MATCH coole-kiste < /etc/hostname
    hostname | MATCH coole-kiste

    echo "Check that setting the timezone works"
    timedatectl set-timezone "America/Cordoba"
    date +"%Z" | MATCH '\-03'
    timedatectl | MATCH "Time zone: America/Cordoba"
    MATCH "America/Cordoba" < /etc/timezone
    test "$(readlink -f /etc/localtime)" = "/usr/share/zoneinfo/America/Cordoba"
